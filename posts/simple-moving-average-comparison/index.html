<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/css/jtd.css"> <link rel=icon  href="/assets/favicon.ico"> <title>Simple moving average speed comparison in Julia, Python and R</title> <div class=page-wrap > <div class=side-bar > <div class=header > <a href="/" class=title > StatisticalMice Blog </a> </div> <label for=show-menu  class=show-menu >MENU</label> <input type=checkbox  id=show-menu  role=button > <div class=menu  id=side-menu > <ul class=menu-list > <li class="menu-list-item active"><a href="/" class="menu-list-link ">Home</a> <ul class="menu-list-child-list "> <li class="menu-list-item "><a href="/posts/julia-python-r/" class=menu-list-link >Julia, Python and R compared *(draft)*</a> <li class="menu-list-item "><a href="/posts/simple-moving-average-comparison" class=menu-list-link >Simple moving average speed comparison</a> </ul> <li class="menu-list-item "><a href="/resources/" class="menu-list-link ">Resources</a> <ul class="menu-list-child-list "> <li class="menu-list-item "><a href="/resources/franklin-franklin/" class="menu-list-link ">Franklin</a> <li class="menu-list-item "><a href="/resources/franklin-code-blocks/" class="menu-list-link ">Code blocks</a> <li class="menu-list-item "><a href="/resources/franklin-goodies/" class="menu-list-link ">More goodies</a> <li class="menu-list-item "><a href="/resources/franklin-tags/" class="menu-list-link ">Tags</a> </ul> </ul> </div> <div class=footer > <img src="/assets/large/mouse.png" alt="Image of a mouse" width=420  height=375 > </div> </div> <div class=main-content-wrap > <div class=main-content > <div class=main-header > <a id=github  href="https://github.com/StatisticalMice/">StatisticalMice on GitHub</a> </div> <div class=franklin-content ><h1 id=simple_moving_average_speed_comparison ><a href="#simple_moving_average_speed_comparison">Simple moving average speed comparison</a></h1> <p>This post compares the performance of Julia, Python and R when running a simple task in a Jupyter notebook. Speed is measured in two ways. The first measurement measures how fast the language can provide answers when run in a notebook. This takes in account that Julia often spends time in compilation, while Python and R either use pre-compiled binaries or interpret code. The second measurement measures the actual performance on the task.</p> <p><a href="https://en.wikipedia.org/wiki/Moving_average">Simple moving average in Wikipedia</a></p> <h1 id=the_task ><a href="#the_task">The task</a></h1> <ul> <li><p>Generate 10^8 random samples from the standard normal distribution</p> <li><p>Calculate SMA with window size 10</p> </ul> <h1 id=environment ><a href="#environment">Environment</a></h1> <p>The notebooks were run in a 2020 MacBook Pro with four ports &#40;standard configuration with Intel processor&#41; with 16 GB of RAM.</p> <h2 id=summary ><a href="#summary">Summary</a></h2> <table><tr><th align=right >Language<th align=right >Load libraries and run task<th align=right >Generate random samples &#40;mean&#41;<th align=right >Run SMA &#40;mean&#41;<tr><td align=right >Julia <sup id="fnref:1"><a href="#fndef:1" class=fnref >[1]</a></sup><td align=right >14.1 s<td align=right >1.4 s<td align=right >147 ms<tr><td align=right >Julia <sup id="fnref:2"><a href="#fndef:2" class=fnref >[2]</a></sup><td align=right >3.0 s<td align=right >1.4 s<td align=right >140 ms<tr><td align=right >Python <sup id="fnref:3"><a href="#fndef:3" class=fnref >[3]</a></sup><td align=right >10.6 s<td align=right >3.3 s<td align=right >6.2 s<tr><td align=right >R <sup id="fnref:4"><a href="#fndef:4" class=fnref >[4]</a></sup><td align=right >45 s<td align=right >4.7 s<td align=right >1.0 s / 43.7 s</table> <p><table class=fndef  id="fndef:1"> <tr> <td class=fndef-backref ><a href="#fnref:1">[1]</a> <td class=fndef-content >Measures Julia performance when run in a fresh kernel and incurs costs for compiling code. </table> <table class=fndef  id="fndef:2"> <tr> <td class=fndef-backref ><a href="#fnref:2">[2]</a> <td class=fndef-content >Measures re-running the Julia notebook, so code has already been compiled. </table> <table class=fndef  id="fndef:3"> <tr> <td class=fndef-backref ><a href="#fnref:3">[3]</a> <td class=fndef-content >There was no significant difference between the first and second runs. </table> <table class=fndef  id="fndef:4"> <tr> <td class=fndef-backref ><a href="#fnref:4">[4]</a> <td class=fndef-content >R was quite fast in calculating the moving average, but data.frame handling was really slow for this code. The last column shows first just the SMA calculation, and then the time required for also updating the data.frame. R code should probably be re-written using data.table. </table> </p> <h2 id=python ><a href="#python">Python</a></h2> <p><a href="https://github.com/StatisticalMice/ProjectsPublic/blob/main/Benchmarks/python-moving-average.ipynb">Python notebook</a></p> <h2 id=julia ><a href="#julia">Julia</a></h2> <p><a href="https://github.com/StatisticalMice/ProjectsPublic/blob/main/Benchmarks/julia-moving-average.ipynb">Julia notebook</a></p> <h2 id=r ><a href="#r">R</a></h2> <p><a href="https://github.com/StatisticalMice/ProjectsPublic/blob/main/Benchmarks/r-moving-average.ipynb">R notebook</a></p> <div class=page-foot > <div class=copyright > &copy; Ari Huttunen. Last modified: December 18, 2020. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>. </div> </div> </div> </div> </div> </div> <!-- end of class page-wrap-->